<!DOCTYPE html>
<!--
 | Generated by Apache Maven Doxia Site Renderer 1.9.2 from src\site\xdoc/index.xml at 14 September 2021
 | Rendered using Apache Maven Fluido Skin 1.9
-->
<html xmlns="http://www.w3.org/1999/xhtml" lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <meta name="generator" content="Apache Maven Doxia Site Renderer 1.9.2" />
    <meta name="author" content="Eric Pugh" />
    <meta name="author" content="Scott Eade" />
    <title>Fulcrum Quartz Service &#x2013; Quartz Scheduler Component</title>
    <link rel="stylesheet" href="./css/apache-maven-fluido-1.9.min.css" />
    <link rel="stylesheet" href="./css/site.css" />
    <link rel="stylesheet" href="./css/print.css" media="print" />
    <script src="./js/apache-maven-fluido-1.9.min.js"></script>
  </head>
  <body class="topBarDisabled">
    <div class="container-fluid">
      <header>
        <div id="banner">
          <div class="pull-left"><a href="../../" id="bannerLeft" title="Apache Turbine"><img src="../../images/turbine-project.png"  alt="Apache Turbine"/></a></div>
          <div class="pull-right"></div>
          <div class="clear"><hr/></div>
        </div>

        <div id="breadcrumbs">
          <ul class="breadcrumb">
        <li id="publishDate">Last Published: 14 September 2021<span class="divider">|</span>
</li>
          <li id="projectVersion">Version: 1.1.3-SNAPSHOT</li>
      <li class="pull-right"><span class="divider">|</span>
<a href="../" title="Fulcrum">Fulcrum</a></li>
      <li class="pull-right"><span class="divider">|</span>
<a href="../../" title="Turbine">Turbine</a></li>
      <li class="pull-right"><a href="https://www.apache.org" class="externalLink" title="Apache">Apache</a></li>
          </ul>
        </div>
      </header>
      <div class="row-fluid">
        <header id="leftColumn" class="span2">
          <nav class="well sidebar-nav">
  <ul class="nav nav-list">
   <li class="nav-header">Overview</li>
    <li class="active"><a href="#"><span class="none"></span>About</a></li>
    <li><a href="configuration.html" title="Configuration"><span class="none"></span>Configuration</a></li>
    <li><a href="cronsamples.html" title="Cron Samples"><span class="none"></span>Cron Samples</a></li>
   <li class="nav-header">Project Documentation</li>
    <li><a href="project-info.html" title="Project Information"><span class="icon-chevron-down"></span>Project Information</a>
     <ul class="nav nav-list">
      <li><a href="dependencies.html" title="Dependencies"><span class="none"></span>Dependencies</a></li>
      <li><a href="dependency-info.html" title="Dependency Information"><span class="none"></span>Dependency Information</a></li>
      <li><a href="distribution-management.html" title="Distribution Management"><span class="none"></span>Distribution Management</a></li>
      <li class="active"><a href="#"><span class="none"></span>About</a></li>
      <li><a href="issue-management.html" title="Issue Management"><span class="none"></span>Issue Management</a></li>
      <li><a href="licenses.html" title="Licenses"><span class="none"></span>Licenses</a></li>
      <li><a href="mailing-lists.html" title="Mailing Lists"><span class="none"></span>Mailing Lists</a></li>
      <li><a href="plugin-management.html" title="Plugin Management"><span class="none"></span>Plugin Management</a></li>
      <li><a href="plugins.html" title="Plugins"><span class="none"></span>Plugins</a></li>
      <li><a href="scm.html" title="Source Code Management"><span class="none"></span>Source Code Management</a></li>
      <li><a href="summary.html" title="Summary"><span class="none"></span>Summary</a></li>
      <li><a href="team.html" title="Team"><span class="none"></span>Team</a></li>
     </ul></li>
    <li><a href="project-reports.html" title="Project Reports"><span class="icon-chevron-right"></span>Project Reports</a></li>
   <li class="nav-header">Apache</li>
    <li><a href="https://www.apache.org/" class="externalLink" title="Apache Website"><span class="none"></span>Apache Website</a></li>
    <li><a href="https://www.apache.org/licenses/" class="externalLink" title="License"><span class="none"></span>License</a></li>
    <li><a href="https://www.apache.org/foundation/how-it-works.html" class="externalLink" title="How the ASF works"><span class="none"></span>How the ASF works</a></li>
    <li><a href="https://www.apache.org/foundation/sponsorship.html" class="externalLink" title="Sponsorship"><span class="none"></span>Sponsorship</a></li>
    <li><a href="https://www.apache.org/foundation/thanks.html" class="externalLink" title="Thanks"><span class="none"></span>Thanks</a></li>
    <li><a href="https://www.apache.org/security/" class="externalLink" title="Security"><span class="none"></span>Security</a></li>
  </ul>
          </nav>
          <div class="well sidebar-nav">
            <hr />
            <div id="poweredBy">
              <div class="clear"></div>
              <div class="clear"></div>
              <div class="clear"></div>
<a href="http://maven.apache.org/" title="Built by Maven" class="poweredBy"><img class="builtBy" alt="Built by Maven" src="./images/logos/maven-feather.png" /></a>
            </div>
          </div>
        </header>
        <main id="bodyColumn"  class="span10" >


  

  <section>
<h2><a name="Overview"></a>Overview</h2>
    
<p>
      This Service functions as a wrapper around the <a class="externalLink" href="http://www.quartz-scheduler.org/">
      Quartz Scheduler</a>. It is written for use in any Avalon compatible container.
    </p>

  </section>

  <section>
<h2><a name="Usage"></a>Usage</h2>

    
<p>
      Scheduled jobs can be either created programmatically (using the Quartz API) or by 
      using an XML configuration based on the 'XMLSchedulingDataProcessorPlugin'. A 
      scheduled job consists of a class implementing the interface 
      <a class="externalLink" href="http://www.quartz-scheduler.org/api/2.0.0/org/quartz/Job.html">org.quartz.Job</a>
      This requires just that one method be defined, execute(), whose
      <a class="externalLink" href="http://www.quartz-scheduler.org/api/2.0.0/org/quartz/JobExecutionContext.html">
      org.quartz.JobExecutionContext</a> argument provides you with details of the
      execution context when the task is triggered.
    </p>

    
<div class="source"><pre class="prettyprint">

import org.quartz.Job;
import org.quartz.JobExecutionContext;
import org.quartz.JobExecutionException;

public class SimpleJob implements Job
{
  public static boolean executed = false;

  public SimpleJob()
  {
    super();
  }

  public void execute(JobExecutionContext context)
    throws JobExecutionException
  {
    executed = true;
  }
}
    </pre></div>

  
<p>
    In order to invoke the SimpleJob we have to tell Quartz when to invoke
    the 'execute' method. In this case we create a CRON trigger firing every
    second to invoke SimpleJob#execute() on a newly created instance. Please
    note that we define a set of parameters using the &lt;job-data-map&gt; 
    which are available using 'JobExecutionContext'.   
  </p>
    
    
<div class="source"><pre class="prettyprint">

&lt;schedule&gt;
  &lt;job&gt;
    &lt;name&gt;simpleJob&lt;/name&gt;
    &lt;group&gt;TURBINE&lt;/group&gt;
    &lt;description&gt;A simple job&lt;/description&gt;
    &lt;job-class&gt;org.apache.fulcrum.quartz.test.SimpleJob&lt;/job-class&gt;
    &lt;job-data-map&gt;
      &lt;entry&gt;
        &lt;key&gt;dressing-list&lt;/key&gt;
        &lt;value&gt;ketchup,mayo&lt;/value&gt;
      &lt;/entry&gt;
      &lt;entry&gt;
        &lt;key&gt;burger-type&lt;/key&gt;
        &lt;value&gt;hotdog&lt;/value&gt;
      &lt;/entry&gt;
    &lt;/job-data-map&gt;
  &lt;/job&gt;
  &lt;trigger&gt;
    &lt;cron&gt;
      &lt;!-- define a Cron trigger firing every second --&gt;
      &lt;name&gt;cronTrigger&lt;/name&gt;
      &lt;group&gt;TURBINE&lt;/group&gt;
      &lt;job-name&gt;simpleJob&lt;/job-name&gt;
      &lt;job-group&gt;TURBINE&lt;/job-group&gt;
      &lt;cron-expression&gt;* * * * * ?&lt;/cron-expression&gt;
    &lt;/cron&gt;
  &lt;/trigger&gt;
&lt;/schedule&gt; 

    </pre></div>
  </section>

  <section>
<h2><a name="Implementation_Details"></a>Implementation Details</h2>
    
<p>
      The implementation registers a JobListener which intercepts the execution of 
      the job to set some Avalon infrastructure such 'Logger' and 'ServiceManager'. 
      This allows an simple invocation of an Avalon service within the job execution.
    </p>
    
<p>
      On shutdown the service implementation ensures that all currently executed jobs
      are finished. This avoids problems if a scheduled job tries to access already
      disposed services.
    </p>
    
<p>
      The service can be started without quartz configuration (relying on default 
      settings) and preconfigured triggers.
    </p>
  </section>


        </main>
      </div>
    </div>
    <hr/>
    <footer>
      <div class="container-fluid">
        <div class="row-fluid">
            <p>&#169;      2004&#x2013;2021
<a href="https://www.apache.org/">The Apache Software Foundation</a>
</p>
        </div>
      </div>
    </footer>
  </body>
</html>
